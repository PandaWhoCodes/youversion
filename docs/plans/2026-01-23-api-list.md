# YouVersion Python SDK - API Support List

Based on the TypeScript SDK documentation at developers.youversion.com.

---

## Summary

| Domain | Methods | Auth Required |
|--------|---------|---------------|
| Bibles | 11 methods | No (API key only) |
| Languages | 2 methods | No (API key only) |
| Highlights | 3 methods | Yes (OAuth) |
| Authentication | 3 methods | N/A |

**Total: 19 methods**

---

## 1. Bible APIs

### Version Methods

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_versions` | `GET /v1/bibles` | `language_ranges: str`, `license_id: str \| int \| None` | `PaginatedResponse[BibleVersion]` |
| `get_version` | `GET /v1/bibles/{bible_id}` | `bible_id: int` | `BibleVersion` |

### Book Methods

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_books` | `GET /v1/bibles/{bible_id}/books` | `version_id: int` | `PaginatedResponse[BibleBook]` |
| `get_book` | `GET /v1/bibles/{bible_id}/books/{book_id}` | `version_id: int`, `book: str` | `BibleBook` |

### Chapter Methods

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_chapters` | `GET /v1/bibles/{bible_id}/books/{book_id}/chapters` | `version_id: int`, `book: str` | `PaginatedResponse[BibleChapter]` |
| `get_chapter` | `GET /v1/bibles/{bible_id}/books/{book_id}/chapters/{chapter_id}` | `version_id: int`, `book: str`, `chapter: int` | `BibleChapter` |

### Verse Methods

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_verses` | `GET /v1/bibles/{bible_id}/books/{book_id}/chapters/{chapter_id}/verses` | `version_id: int`, `book: str`, `chapter: int` | `PaginatedResponse[BibleVerse]` |
| `get_verse` | `GET /v1/bibles/{bible_id}/books/{book_id}/chapters/{chapter_id}/verses/{verse_id}` | `version_id: int`, `book: str`, `chapter: int`, `verse: int` | `BibleVerse` |

### Passage Methods

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_passage` | `GET /v1/bibles/{bible_id}/passages/{passage_id}` | `version_id: int`, `usfm: str`, `format: Literal["text", "html"] = "text"`, `include_headings: bool = False`, `include_notes: bool = False` | `BiblePassage` |

### Index Methods

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_index` | `GET /v1/bibles/{bible_id}/index` | `version_id: int` | `BibleIndex` |

### Verse of the Day Methods

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_all_votds` | `GET /v1/votd` | None | `PaginatedResponse[VOTD]` |
| `get_votd` | `GET /v1/votd/{day}` | `day: int` (1-366) | `VOTD` |

---

## 2. Language APIs

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_languages` | `GET /v1/languages` | `country: str \| None`, `page_size: int \| None`, `page_token: str \| None` | `PaginatedResponse[Language]` |
| `get_language` | `GET /v1/languages/{language_id}` | `language_id: str` (BCP 47 tag) | `Language` |

---

## 3. Highlights APIs (Requires OAuth)

| Method | Endpoint | Parameters | Returns |
|--------|----------|------------|---------|
| `get_highlights` | `GET /v1/highlights` | `bible_id: int`, `passage_id: str` | `list[Highlight]` |
| `create_highlight` | `POST /v1/highlights` | `bible_id: int`, `passage_id: str`, `color: str` (hex) | `Highlight` |
| `delete_highlight` | `DELETE /v1/highlights/{passage_id}` | `passage_id: str`, `bible_id: int` | `None` |

---

## 4. Authentication APIs

| Method | Purpose | Notes |
|--------|---------|-------|
| `get_authorization_url` | Generate OAuth authorization URL | Returns URL for user redirect |
| `exchange_code` | Exchange auth code for tokens | PKCE flow with code_verifier |
| `refresh_tokens` | Refresh expired access token | Uses refresh_token |

### OAuth Endpoints (External)

| Endpoint | Method | Purpose |
|----------|--------|---------|
| `https://api.youversion.com/auth/authorize` | GET (redirect) | User authorization |
| `https://api.youversion.com/auth/token` | POST | Token exchange |

---

## 5. Models

### Bible Content Models

```python
class BibleVersion:
    id: int
    abbreviation: str
    title: str
    language_tag: str
    copyright_short: str | None
    copyright_long: str | None

class BibleBook:
    id: str                          # USFM identifier (e.g., "GEN", "MAT")
    title: str
    abbreviation: str
    canon: Literal["old_testament", "new_testament", "deuterocanon"]
    chapters: list[BibleChapter] | None
    intro: BibleBookIntro | None

class BibleBookIntro:
    id: str
    passage: str
    title: str

class BibleChapter:
    id: int
    passage: str
    title: str
    verses: list[BibleVerse] | None

class BibleVerse:
    id: int
    passage: str
    title: str

class BiblePassage:
    id: str                          # USFM reference
    content: str                     # Text or HTML
    reference: str                   # Human-readable (e.g., "John 3:16")

class BibleIndex:
    text_direction: Literal["ltr", "rtl"]
    books: list[BibleIndexBook]

class BibleIndexBook:
    id: str
    chapters: list[BibleIndexChapter]

class BibleIndexChapter:
    id: int
    verses: list[BibleIndexVerse]

class BibleIndexVerse:
    id: int
```

### Verse of the Day Models

```python
class VOTD:
    day: int                         # 1-366
    passage: str                     # USFM reference
```

### Language Models

```python
class Language:
    id: str                          # BCP 47 tag (e.g., "en", "es")
    name: str
    local_name: str
    writing_population: int | None
    speaking_population: int | None
    scripts: list[str]
    variants: list[str]
    default_bible_id: int | None
```

### Highlight Models

```python
class Highlight:
    bible_id: int
    passage_id: str                  # USFM reference
    color: str                       # Hex color (e.g., "ff5733")

class CreateHighlight:
    bible_id: int
    passage_id: str
    color: str                       # Pattern: ^[0-9a-f]{6}$
```

### Authentication Models

```python
class User:
    id: str                          # yvp_id (UUID)
    name: str
    first_name: str | None
    last_name: str | None
    avatar_url: str | None
    email: str | None                # Only if 'email' scope granted

class AuthTokens:
    access_token: str
    id_token: str
    refresh_token: str
    expires_in: int                  # Seconds (typically 3599)
    token_type: Literal["Bearer"]

class AuthenticationState:
    is_authenticated: bool
    is_loading: bool
    access_token: str | None
    id_token: str | None
    user: User | None
    error: str | None
```

### Generic Models

```python
class PaginatedResponse(Generic[T]):
    data: list[T]
    next_page_token: str | None
    total_count: int | None
```

---

## 6. Error Codes

### HTTP Status Codes

| Code | Name | When |
|------|------|------|
| 200 | OK | Request successful |
| 204 | No Content | Success, no data (e.g., delete) |
| 400 | Bad Request | Invalid parameters, malformed USFM |
| 401 | Unauthorized | Missing/invalid API key or token |
| 404 | Not Found | Resource doesn't exist |
| 406 | Not Acceptable | Invalid Accept header |
| 429 | Too Many Requests | Rate limit exceeded |
| 500 | Internal Server Error | Server error |
| 503 | Service Unavailable | Temporary outage |

### Domain Errors (Result types)

```python
class NotFoundError:
    resource: Literal["version", "book", "chapter", "verse", "passage", "language", "highlight"]
    identifier: str
    message: str

class ValidationError:
    field: str
    reason: str

class RateLimitInfo:
    retry_after: float | None        # Seconds until retry allowed
```

---

## 7. USFM Reference Format

### Book Identifiers (3-char codes)

**Old Testament:**
```
GEN, EXO, LEV, NUM, DEU, JOS, JDG, RUT, 1SA, 2SA,
1KI, 2KI, 1CH, 2CH, EZR, NEH, EST, JOB, PSA, PRO,
ECC, SNG, ISA, JER, LAM, EZK, DAN, HOS, JOL, AMO,
OBA, JON, MIC, NAM, HAB, ZEP, HAG, ZEC, MAL
```

**New Testament:**
```
MAT, MRK, LUK, JHN, ACT, ROM, 1CO, 2CO, GAL, EPH,
PHP, COL, 1TH, 2TH, 1TI, 2TI, TIT, PHM, HEB, JAS,
1PE, 2PE, 1JN, 2JN, 3JN, JUD, REV
```

**Deuterocanon:**
```
TOB, JDT, ESG, WIS, SIR, BAR, LJE, S3Y, SUS, BEL,
1MA, 2MA, 3MA, 4MA, 1ES, 2ES, MAN, PS2
```

### Passage Reference Format

```
{BOOK}.{CHAPTER}.{VERSE}              # Single verse: JHN.3.16
{BOOK}.{CHAPTER}.{VERSE}-{VERSE}      # Verse range: JHN.3.16-17
{BOOK}.{CHAPTER}                      # Full chapter: JHN.3
```

---

## 8. Client Interface

### Sync Client

```python
class YouVersionClient:
    def __init__(self, api_key: str, *, base_url: str = "https://api.youversion.com", timeout: float = 30.0): ...

    # Bible methods
    def get_versions(self, language_ranges: str, license_id: str | int | None = None) -> Result[PaginatedResponse[BibleVersion], ApiError]: ...
    def get_version(self, bible_id: int) -> Result[BibleVersion, NotFoundError]: ...
    def get_books(self, version_id: int) -> Result[PaginatedResponse[BibleBook], NotFoundError]: ...
    def get_book(self, version_id: int, book: str) -> Result[BibleBook, NotFoundError]: ...
    def get_chapters(self, version_id: int, book: str) -> Result[PaginatedResponse[BibleChapter], NotFoundError]: ...
    def get_chapter(self, version_id: int, book: str, chapter: int) -> Result[BibleChapter, NotFoundError]: ...
    def get_verses(self, version_id: int, book: str, chapter: int) -> Result[PaginatedResponse[BibleVerse], NotFoundError]: ...
    def get_verse(self, version_id: int, book: str, chapter: int, verse: int) -> Result[BibleVerse, NotFoundError]: ...
    def get_passage(self, version_id: int, usfm: str, *, format: Literal["text", "html"] = "text", include_headings: bool = False, include_notes: bool = False) -> Result[BiblePassage, NotFoundError | ValidationError]: ...
    def get_index(self, version_id: int) -> Result[BibleIndex, NotFoundError]: ...
    def get_votd(self, day: int) -> Result[VOTD, ValidationError]: ...
    def get_all_votds(self) -> Result[PaginatedResponse[VOTD], ApiError]: ...

    # Language methods
    def get_languages(self, *, country: str | None = None, page_size: int | None = None, page_token: str | None = None) -> Result[PaginatedResponse[Language], ApiError]: ...
    def get_language(self, language_id: str) -> Result[Language, NotFoundError]: ...

class AuthenticatedYouVersionClient(YouVersionClient):
    def __init__(self, api_key: str, access_token: str, *, base_url: str = "https://api.youversion.com", timeout: float = 30.0): ...

    # Highlight methods (require auth)
    def get_highlights(self, bible_id: int, passage_id: str) -> Result[list[Highlight], NotFoundError]: ...
    def create_highlight(self, bible_id: int, passage_id: str, color: str) -> Result[Highlight, ValidationError]: ...
    def delete_highlight(self, passage_id: str, bible_id: int) -> Result[None, NotFoundError]: ...
```

### Async Client

```python
class AsyncYouVersionClient:
    # Same methods as YouVersionClient, but async
    async def get_versions(...) -> Result[...]: ...
    # ...

class AsyncAuthenticatedYouVersionClient(AsyncYouVersionClient):
    # Same methods as AuthenticatedYouVersionClient, but async
    async def get_highlights(...) -> Result[...]: ...
    # ...
```

---

## 9. Implementation Priority

### Phase 1: Core (MVP)
1. Client initialization with API key
2. `get_versions`, `get_version`
3. `get_books`, `get_book`
4. `get_chapters`, `get_chapter`
5. `get_verses`, `get_verse`
6. `get_passage`
7. Error handling (exceptions + Result types)

### Phase 2: Extended
1. `get_index`
2. `get_votd`, `get_all_votds`
3. `get_languages`, `get_language`

### Phase 3: Authenticated
1. OAuth flow helpers
2. `get_highlights`
3. `create_highlight`
4. `delete_highlight`
